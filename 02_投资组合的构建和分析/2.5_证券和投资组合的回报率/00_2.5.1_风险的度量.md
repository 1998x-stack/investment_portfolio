# 00_2.5.1_风险的度量

"""

Lecture: 02_投资组合的构建和分析/2.5_证券和投资组合的回报率
Content: 00_2.5.1_风险的度量

"""

### 2.5.1 风险的度量

#### 概述

在投资组合管理中，除了确定回报率外，估计与回报相关的风险或不确定性也是非常重要的。风险是指投资回报的不确定性，主要通过回报率的方差和标准差来衡量。这些统计量实际上是测量回报率围绕其平均值变化的程度，如果回报率围绕均值发生剧烈变化，则表明回报率存在很大的不确定性。

#### 方差和标准差的计算

表2-1展示了如何利用假想股票3年间的回报率记录，计算其方差和标准差的方法：

| 年份 | 回报率（%） | 偏离（%） | 偏离的平方（%²） |
|------|------------|-----------|-----------------|
| 1    | 5          | -10       | 100             |
| 2    | 15         | 0         | 0               |
| 3    | 25         | 10        | 100             |

- 平均回报率：$$ \text{平均回报率} = \frac{5 + 15 + 25}{3} = 15\% $$
- 方差：$$ \text{方差} = \frac{100 + 0 + 100}{3} = 66.67 $$
- 标准差：$$ \text{标准差} = \sqrt{66.67} \approx 8.16\% $$

需要注意的是，在计算过程中，方差的量纲是回报率的平方，这在经济上没有实际意义，因此通常对方差开平方得到标准差。

#### 标准差与风险

标准差是测量投资回报率不确定性的重要指标。标准差越大，表明回报率的波动性越大，投资风险也就越高。投资者通过计算投资组合的标准差，可以评估其整体风险水平。

#### 协方差和相关系数

在多资产投资组合中，不同资产之间的协方差和相关系数也需要考虑。协方差衡量两种资产回报率共同变动的程度，而相关系数则是协方差的标准化形式，取值范围从-1到1。负相关的资产可以显著降低投资组合的整体风险，因为当一种资产的回报下降时，另一种资产的回报可能会上升，从而平滑整体回报的波动。

#### 实际应用

1. **单一资产的风险度量**：
   - 对于单一资产，风险通常用回报率的标准差来衡量。例如，如果某只股票的历史回报率标准差为10%，则投资该股票的风险较高。
   
2. **多资产组合的风险度量**：
   - 在多资产组合中，除了各个资产的标准差外，还需要考虑资产之间的协方差。通过均值-方差优化，可以计算出投资组合的整体风险水平。

#### 例子

假设一个投资者有以下三种资产：股票A、股票B和债券C。通过计算它们的历史回报率和协方差，可以得到以下结果：

| 资产     | 平均回报率 | 风险（标准差） | 股票A  | 股票B  | 债券C  |
| -------- | ---------- | -------------- | ------ | ------ | ------ |
| 股票A    | 10%        | 15%            | 1      | 0.8    | 0.2    |
| 股票B    | 8%         | 12%            | 0.8    | 1      | 0.3    |
| 债券C    | 5%         | 5%             | 0.2    | 0.3    | 1      |

通过均值-方差优化，可以得到不同组合在有效前沿上的位置，并选择一个最优的组合。

#### 结论

风险的度量在投资组合管理中至关重要。通过计算回报率的方差和标准差，投资者可以评估单一资产或多资产组合的风险水平。同时，考虑资产之间的协方差和相关系数，可以帮助投资者构建更加多样化和低风险的投资组合。


---

### 方差、相关系数和协方差的计算

#### 方差的计算

方差是用来衡量一组数据分布的离散程度的统计量。在投资中，方差用于衡量投资回报率的波动性。

**计算公式：**
$$ \sigma^2 = \frac{1}{N} \sum_{i=1}^{N} (R_i - \bar{R})^2 $$

其中：
- $\sigma^2$ 表示方差
- $N$ 表示样本数量
- $R_i$ 表示第 $i$ 个观察值（即第 $i$ 年的回报率）
- $\bar{R}$ 表示样本均值（即平均回报率）

**计算步骤：**
1. 计算所有观察值的平均值 $\bar{R}$。
2. 计算每个观察值与平均值的偏离程度 $(R_i - \bar{R})$。
3. 计算这些偏离值的平方，并求和。
4. 将求和结果除以观察值的数量 $N$。

**例子：**
假设某只股票在3年的回报率分别为5%、15%和25%。

1. 平均回报率：$$ \bar{R} = \frac{5 + 15 + 25}{3} = 15\% $$
2. 计算偏离和偏离的平方：
   - 年1：$ 5 - 15 = -10 $，偏离平方：$ (-10)^2 = 100 $
   - 年2：$ 15 - 15 = 0 $，偏离平方：$ 0^2 = 0 $
   - 年3：$ 25 - 15 = 10 $，偏离平方：$ 10^2 = 100 $
3. 求和：$$ 100 + 0 + 100 = 200 $$
4. 方差：$$ \sigma^2 = \frac{200}{3} \approx 66.67 $$

#### 相关系数的计算

相关系数用于衡量两种变量之间的线性关系，取值范围在 -1 和 1 之间。

**计算公式：**
$$ \rho_{XY} = \frac{\text{Cov}(X, Y)}{\sigma_X \sigma_Y} $$

其中：
- $\rho_{XY}$ 表示变量 $X$ 和 $Y$ 的相关系数
- $\text{Cov}(X, Y)$ 表示 $X$ 和 $Y$ 的协方差
- $\sigma_X$ 和 $\sigma_Y$ 分别表示 $X$ 和 $Y$ 的标准差

**计算步骤：**
1. 计算 $X$ 和 $Y$ 的协方差。
2. 计算 $X$ 和 $Y$ 的标准差。
3. 用协方差除以标准差的乘积。

#### 协方差的计算

协方差用于衡量两种变量共同变化的程度。

**计算公式：**
$$ \text{Cov}(X, Y) = \frac{1}{N} \sum_{i=1}^{N} (X_i - \bar{X})(Y_i - \bar{Y}) $$

其中：
- $\text{Cov}(X, Y)$ 表示 $X$ 和 $Y$ 的协方差
- $N$ 表示样本数量
- $X_i$ 和 $Y_i$ 分别表示第 $i$ 个观察值
- $\bar{X}$ 和 $\bar{Y}$ 分别表示 $X$ 和 $Y$ 的平均值

**计算步骤：**
1. 计算 $X$ 和 $Y$ 的平均值 $\bar{X}$ 和 $\bar{Y}$。
2. 计算每个观察值与其平均值的偏离程度 $(X_i - \bar{X})$ 和 $(Y_i - \bar{Y})$。
3. 将偏离值相乘，并求和。
4. 将求和结果除以观察值的数量 $N$。

**例子：**
假设我们有两个资产A和B，它们在3年的回报率如下：

| 年份 | 资产A回报率（%） | 资产B回报率（%） |
|------|----------------|----------------|
| 1    | 5              | 7              |
| 2    | 15             | 10             |
| 3    | 25             | 20             |

1. 计算平均回报率：
   - 资产A：$$ \bar{X} = \frac{5 + 15 + 25}{3} = 15 $$
   - 资产B：$$ \bar{Y} = \frac{7 + 10 + 20}{3} = 12.33 $$
2. 计算偏离和偏离的乘积：
   - 年1：$ (5 - 15)(7 - 12.33) = -10 \times -5.33 = 53.3 $
   - 年2：$ (15 - 15)(10 - 12.33) = 0 \times -2.33 = 0 $
   - 年3：$ (25 - 15)(20 - 12.33) = 10 \times 7.67 = 76.7 $
3. 求和：$$ 53.3 + 0 + 76.7 = 130 $$
4. 协方差：$$ \text{Cov}(A, B) = \frac{130}{3} \approx 43.33 $$

### 总结

- 方差度量的是单个资产回报率的波动性。
- 协方差度量的是两个资产回报率共同变动的程度。
- 相关系数度量的是两个资产回报率之间的线性关系，标准化了协方差的结果。
